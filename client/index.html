<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/materialize.min.css">
    <title>JavaScript|Ajax|jQuery</title>
  </head>

  <body>
    <nav class="light-blue lighten-1" role="navigation">
      <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">JavaScript | AJAX | jQuery</a>
      </div>
    </nav>

    <div class="container">
      <div class="section">

        <div class="row">
          <div class="center blue-text text-darken-1" style="margin-top:50px;">
            <button class="btn light-blue darken-3" id="change-color" style="margin-bottom: 15px;">Click Me</button>
          </div>
          <div class="col s12 m2 offset-m3">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
        </div>

        <div class="row">
          <div class="col s12 m2 offset-m3">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m2 offset-m3">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
          <div class="col s12 m2">
            <div class="box"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/jquery-3.1.1.min.js"></script>
    <script>
      let box = $('.box')
      let changeColor = $('#change-color')
      $('#change-color').on('click', function() {
        $.ajax({
          type: 'GET',
          url: 'http://localhost:3000/api/colors',
          dataType: 'json',
          success: function(data) {
            // console.log(data);
            box[data.i].style.backgroundColor = `rgb(${data.rgb1},${data.rgb2},${data.rgb3})`;
            // console.log(box[data.i].style.backgroundColor = `rgb(${data.rgb1},${data.rgb2},${data.rgb3})`);
          },
          error: function() {
            alert("An error has occurred");
          }
        })
      })
      // changeColor.click(function() {
      //   $.ajax({
      //     type: 'GET',
      //     url: 'http://localhost:3000/api/colors',
      //     dataType: 'json',
      //     success: function(data) {
      //       // console.log(data);
      //       box[data.i].style.backgroundColor = `rgb(${data.rgb1},${data.rgb2},${data.rgb3})`;
      //       // console.log(box[data.i].style.backgroundColor = `rgb(${data.rgb1},${data.rgb2},${data.rgb3})`);
      //     },
      //     error: function() {
      //       alert("An error has occurred");
      //     }
      //   })
      // })
    </script>
  </body>

</html>
